<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="css/XiaomiRollBar.css">
    <link rel="stylesheet" href="font-awesome-4.7.0/css/font-awesome.css">
    <script src="libs/jquery.js"></script>
    <script src="js/XiaomiRollBar.js"></script>
    <script>
        $(function () {
            $.getJSON("data.json", function (data) {
                // console.log(data);
                var html = "";
                data.recommend1.forEach(function (item) {
                    // console.log(item.imgSrc)
                    html += `
                        <li>
                            <a href="#">
                                <img src="${item.imgSrc}" alt="">
                                <p class="title">${item.title}</p>
                            </a>
                            <p class="price">${item.price}</p>
                            <p class="comment">${item.comment}</p>
                        </li>`
                })
                $(".item1").html(html);
                html = "";
                data.recommend2.forEach(function (item) {
                    // console.log(item.imgSrc)
                    html += `
                        <li>
                            <a href="#">
                                <img src="${item.imgSrc}" alt="">
                                <p class="title">${item.title}</p>
                            </a>
                            <p class="price">${item.price}</p>
                            <p class="comment">${item.comment}</p>
                        </li>`
                })
                $(".item2").html(html);
                html = "";
                data.recommend3.forEach(function (item) {
                    // console.log(item.imgSrc)
                    html += `
                        <li>
                            <a href="#">
                                <img src="${item.imgSrc}" alt="">
                                <p class="title">${item.title}</p>
                            </a>
                            <p class="price">${item.price}</p>
                            <p class="comment">${item.comment}</p>
                        </li>`
                })
                $(".item3").html(html);
                html = "";
                data.recommend4.forEach(function (item) {
                    // console.log(item.imgSrc)
                    html += `
                        <li>
                            <a href="#">
                                <img src="${item.imgSrc}" alt="">
                                <p class="title">${item.title}</p>
                            </a>
                            <p class="price">${item.price}</p>
                            <p class="comment">${item.comment}</p>
                        </li>`
                })
                $(".item4").html(html);
            })
            $(".item").css({
                position: "absolute",
                top: 0,
                left: "1200px"
            })
            var i = 0;
            $(".item1").css("left", "0px");
            $(".right").click(function () {
                if (i == 3) {
                    return;
                }
                i = i + 1;
                $(`.item${i}`).animate({
                    left: "-1200px"
                },300);
                if (i < 4) {
                    $(`.item${i + 1}`).animate({
                        left: "0px"
                    },300);
                    $(".left").removeClass("doNot");
                } else if (i + 1 == 4) {
                    $(`.item${i + 1}`).animate({"left": "0"},300);
                } else if (i + 1 > 4) {
                    i = 3;
                    $(`.item${i + 1}`).css("left", "0");
                }
                // console.log((i-1) + ":" + "1" + ":" + $(`.item1`).position().left)
                // console.log((i-1) + ":" + "2" + ":" + $(`.item2`).position().left)
                // console.log((i-1)+ ":" + "3" + ":" + $(`.item3`).position().left)
                // console.log((i-1) + ":" + "4" + ":" + $(`.item4`).position().left)
                if(i == 3){
                    $(".right").addClass("doNot");
                    $(".left").removeClass("doNot");
                    return;
                }
            })
            $(".left").click(function () {
                if (i == 0) {
                    return;
                }

                $(`.item${i + 1}`).animate({
                    left: "1200px"
                },300);
                if (i > -1) {
                    $(`.item${i}`).animate({
                        left: "0px"
                    },300);
                    $(".left").removeClass("doNot");
                } else if (i - 1 == -1) {
                    $(`.item${i + 1}`).animate({"left": "0"},300);
                } else if (i - 1 < -1) {
                    i = 0;

                    $(`.item${i + 1}`).css("left", "0");
                }
                i--;
                if(i == 0){
                    $(".left").addClass("doNot");
                    $(".right").removeClass("doNot");
                }
            })

        })
    </script>
</head>

<body>
    <div class="recommend">
        <h2>为你推荐</h2>
        <div class="more">
            <a href="javascript:;" class="left doNot">
                <i class="fa fa-angle-left"></i></a> <a href="javascript:;" class="right"><i class="fa fa-angle-right"></i>
            </a>
        </div>

        <div class="product">
            <ul class="item item1 clearfix">

            </ul>
            <ul class="item item2 clearfix">

            </ul>
            <ul class="item item3 clearfix">

            </ul>
            <ul class="item item4 clearfix">

            </ul>
        </div>
    </div>
</body>

</html>